<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-4 md:p-8">
  <div class="max-w-7xl mx-auto">

    <!-- Header con gradiente moderno -->
    <div class="bg-gradient-to-r from-blue-900 via-blue-800 to-indigo-900 rounded-t-3xl shadow-2xl overflow-hidden">
      <div class="p-8 md:p-12 text-white relative">
        <div class="absolute inset-0 bg-black bg-opacity-10"></div>
        <div class="relative z-10">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg">
              <svg class="w-8 h-8 text-white" viewBox="0 0 24 24" fill="none">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div>
              <h1 class="text-4xl font-bold mb-2 bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent">
                Búsqueda de Trazabilidad
              </h1>
              <p class="text-blue-100 text-lg font-medium">Consulta el historial completo de cambios de usuarios</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Card -->
    <div class="bg-white rounded-b-3xl shadow-2xl overflow-hidden">

      <!-- Search Section -->
      <div class="space-y-3 p-8 md:p-12">
        <label for="nombreUsuario" class="block text-lg font-bold text-gray-800">
          <span class="flex items-center gap-2">
            <!-- ...icono... -->
            Nombre del Usuario
          </span>
        </label>
        <div class="relative">
          <input
            type="text"
            id="nombreUsuario"
            [formControl]="nombreUsuarioControl"
            name="nombreUsuario"
            class="w-full px-6 py-4 pr-12 text-lg border-2 border-gray-200 rounded-2xl bg-white focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-300 shadow-sm hover:shadow-md"
            placeholder="Ingrese el nombre del usuario a buscar..."
            (keyup.enter)="buscarTrazabilidad()"
            (focus)="mostrarSugerencias = sugerenciasUsuarios.length > 0"
            autocomplete="off"
            (blur)="onInputBlur()"
          />

<ul *ngIf="mostrarSugerencias" class="absolute z-20 left-0 w-full bg-white border border-gray-200 rounded-xl mt-2 shadow-lg max-h-60 overflow-y-auto">
  <li
    *ngFor="let usuario of sugerenciasUsuarios"
    (mousedown)="seleccionarUsuario(usuario)"
    class="px-6 py-3 cursor-pointer hover:bg-blue-50 text-gray-800"
  >
    <span class="font-semibold">{{ usuario.nombre }}</span>
    <span class="text-gray-500 text-sm ml-2">{{ usuario.correo }}</span>
  </li>
  <li *ngIf="sugerenciasUsuarios.length === 0" class="px-6 py-3 text-gray-400">Sin resultados</li>
</ul>
        </div>

        <!-- Botones fuera del div relativo -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center mt-6">
          <button
            type="button"
            class="group relative px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 focus:outline-none focus:ring-4 focus:ring-blue-200"
            (click)="buscarTrazabilidad()"
            [disabled]="loading || !nombreUsuarioControl.value?.trim()"
          >
            <span class="flex items-center justify-center gap-3">
              <svg *ngIf="!loading" class="w-6 h-6" viewBox="0 0 24 24" fill="none">
                <path d="M21 21L16.514 16.506L21 21ZM18.485 10.485C18.485 15.2137 14.6987 19 9.97 19C5.24134 19 1.455 15.2137 1.455 10.485C1.455 5.75634 5.24134 1.97 9.97 1.97C14.6987 1.97 18.485 5.75634 18.485 10.485Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div *ngIf="loading" class="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
              {{ loading ? 'Buscando...' : 'Buscar Trazabilidad' }}
            </span>
          </button>

          <button
            type="button"
            class="px-8 py-4 border-2 border-gray-300 rounded-2xl text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 font-bold text-lg shadow-sm hover:shadow-md transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-gray-200"
            (click)="limpiarBusqueda()"
            [disabled]="loading"
          >
            <span class="flex items-center justify-center gap-3">
              <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none">
                <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Limpiar
            </span>
          </button>
        </div>
      </div>

      <!-- Loading State -->
      <div *ngIf="loading" class="p-16 text-center">
        <div class="flex flex-col items-center gap-6">
          <div class="w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"></div>
          <div class="space-y-2">
            <div class="text-gray-800 font-bold text-xl">Buscando trazabilidad del usuario...</div>
            <div class="text-gray-500 text-lg">Esto puede tomar unos momentos</div>
          </div>
        </div>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !loading" class="p-16 text-center">
        <div class="flex flex-col items-center gap-6">
          <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
            <svg class="w-8 h-8 text-red-600" viewBox="0 0 24 24" fill="none">
              <path d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="space-y-4">
            <div class="text-red-600 font-bold text-xl">{{ error }}</div>
            <button
              class="px-6 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
              (click)="limpiarBusqueda()"
            >
              Intentar nuevamente
            </button>
          </div>
        </div>
      </div>

      <!-- User Info Card -->
      <div *ngIf="trazabilidadUsuario && !loading && !error" class="relative overflow-hidden">
        <!-- Background decorativo -->
        <div class="absolute inset-0 bg-gradient-to-r from-blue-900 via-blue-800 to-indigo-900"></div>
        <div class="absolute inset-0 bg-black bg-opacity-10"></div>

        <!-- Contenido -->
        <div class="relative z-10 p-8 md:p-12 text-white">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-8">
            <div class="flex items-center gap-6">
              <div class="w-20 h-20 bg-white bg-opacity-20 backdrop-mostrarSugerencias-sm rounded-3xl flex items-center justify-center shadow-2xl">
                <svg class="w-10 h-10 text-white" viewBox="0 0 24 24" fill="none">
                  <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div>
                <h3 class="text-3xl font-bold mb-2">{{ trazabilidadUsuario.nombre }}</h3>
                <p class="text-blue-100 mb-3 text-lg">{{ trazabilidadUsuario.correo }}</p>
                <span class="bg-white bg-opacity-20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-bold border border-white border-opacity-30">
                  {{ trazabilidadUsuario.rol }}
                </span>
              </div>
            </div>

            <!-- Botones de exportación -->
            <div class="flex flex-col sm:flex-row gap-4">
              <button
                type="button"
                class="flex items-center justify-center gap-3 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 focus:outline-none focus:ring-4 focus:ring-green-200"
                (click)="exportarTrazabilidadUsuario('excel')"
                [disabled]="loading"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M19 2H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 18H8V4h11v16zM16 13h-2v2h2v-2zm0-4h-2v2h2V9zm-4 4H8v2h4v-2zm0-4H8v2h4V9z"/>
                  <rect x="2" y="6" width="4" height="12" rx="1" fill="#22c55e"/>
                </svg>
                <span>Exportar Excel</span>
              </button>
              <button
                type="button"
                class="flex items-center justify-center gap-3 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-300 font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 focus:outline-none focus:ring-4 focus:ring-red-200"
                (click)="exportarTrazabilidadUsuario('pdf')"
                [disabled]="loading"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                <span>Exportar PDF</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Incidentes Section -->
      <!-- ... (resto de tu código para incidentes, cambios de estado y objetos perdidos, igual que lo tienes) ... -->

    </div>
  </div>
</div>






